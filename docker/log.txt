C:\repos\tstp-docker\docker\elasticsearch>ecs-cli up --cluster-config tstp --ecs-profile tstp-profile
[36mINFO[0m[0000] Created cluster                               [36mcluster[0m=tstp [36mregion[0m=eu-west-2
[36mINFO[0m[0000] Waiting for your cluster resources to be created...
[36mINFO[0m[0000] Cloudformation stack status                   [36mstackStatus[0m=CREATE_IN_PROGRESS
VPC created: vpc-04fe97d5ec4fd40d8
Subnet created: subnet-0ff3b8672ae70cf0e
Subnet created: subnet-0c5b242c4ebd35dfc
Cluster creation succeeded.


C:\repos\tstp-docker\docker\elasticsearch>aws ec2 describe-vpcs
(...)

C:\repos\tstp-docker\docker\elasticsearch>aws ec2 describe-subnets
(...)

C:\repos\tstp-docker\docker\elasticsearch>aws ec2 describe-security-groups --filters Name=vpc-id,Values=vpc-0b3e036e85962f3f9 --region eu-west-2
{
    "SecurityGroups": [
        {
            "Description": "default VPC security group",
            "GroupName": "default",
            "IpPermissions": [
                {
                    "IpProtocol": "-1",
                    "IpRanges": [],
                    "Ipv6Ranges": [],
                    "PrefixListIds": [],
                    "UserIdGroupPairs": [
                        {
                            "GroupId": "sg-0bb902336ef329460",
                            "UserId": "777087578287"
                        }
                    ]
                }
            ],
            "OwnerId": "777087578287",
            "GroupId": "sg-0bb902336ef329460",
            "IpPermissionsEgress": [
                {
                    "IpProtocol": "-1",
                    "IpRanges": [
                        {
                            "CidrIp": "0.0.0.0/0"
                        }
                    ],
                    "Ipv6Ranges": [],
                    "PrefixListIds": [],
                    "UserIdGroupPairs": []
                }
            ],
            "VpcId": "vpc-04fe97d5ec4fd40d8"
        }
    ]
}


C:\repos\tstp-docker\docker\elasticsearch>
aws ec2 authorize-security-group-ingress --group-id sg-083b02d443d66396c --protocol tcp --port 80 --cidr 0.0.0.0/0 --region eu-west-2


C:\repos\tstp-docker\docker\elasticsearch>
ecs-cli compose --project-name tstp service up --create-log-groups --cluster-config tstp --ecs-profile tstp-profile
[36mINFO[0m[0000] Using ECS task definition                     [36mTaskDefinition[0m="tstp:1"
[36mINFO[0m[0000] Created Log Group tutorial in eu-west-2
[36mINFO[0m[0000] Auto-enabling ECS Managed Tags
[36mINFO[0m[0010] (service tstp) has started 1 tasks: (task 9571e91b90e74069b16cfbc5647e8f73).  [36mtimestamp[0m="2021-02-14 10:51:00 +0000 UTC"
[36mINFO[0m[0030] Service status                                [36mdesiredCount[0m=1 [36mrunningCount[0m=1 [36mserviceName[0m=tstp
[36mINFO[0m[0030] (service tstp) has reached a steady state.    [36mtimestamp[0m="2021-02-14 10:51:21 +0000 UTC"
[36mINFO[0m[0030] (service tstp) (deployment ecs-svc/4025887537151565899) deployment completed.  [36mtimestamp[0m="2021-02-14 10:51:21 +0000 UTC"
[36mINFO[0m[0030] ECS Service has reached a stable state        [36mdesiredCount[0m=1 [36mrunningCount[0m=1 [36mserviceName[0m=tstp
[36mINFO[0m[0030] Created an ECS service                        [36mservice[0m=tstp [36mtaskDefinition[0m="tstp:1"


C:\repos\tstp-docker\docker\elasticsearch>ecs-cli compose --project-name tstp service ps --cluster-config tstp --ecs-profile tstp-profile
Name                                       State    Ports                    TaskDefinition  Health
tstp/9571e91b90e74069b16cfbc5647e8f73/web  RUNNING  3.10.117.173:80->80/tcp  tstp:1          UNKNOWN













############################
# CLEANUP
############################

C:\repos\tstp-docker\docker\elasticsearch>ecs-cli compose --project-name tstp service down --cluster-config tstp --ecs-profile tstp-profile
[36mINFO[0m[0000] Deleted ECS service                           [36mservice[0m=tstp
[36mINFO[0m[0000] Service status                                [36mdesiredCount[0m=0 [36mrunningCount[0m=1 [36mserviceName[0m=tstp
[36mINFO[0m[0010] Service status                                [36mdesiredCount[0m=0 [36mrunningCount[0m=0 [36mserviceName[0m=tstp
[36mINFO[0m[0010] (service tstp) has stopped 1 running tasks: (task 9571e91b90e74069b16cfbc5647e8f73).  [36mtimestamp[0m="2021-02-14 11:00:48 +0000 UTC"
[36mINFO[0m[0010] ECS Service has reached a stable state        [36mdesiredCount[0m=0 [36mrunningCount[0m=0 [36mserviceName[0m=tstp




